# Color
color  diff-header       default magenta
color  diff-chunk        black   white

# Settings
set refresh-mode = auto
set main-view = id date author commit-title:graph=yes,refs=yes
set ignore-space = all

# Branch
bind main    b        ?git checkout -B "%(prompt Enter branch name: )" %(commit)
bind refs    b        !git checkout -B "%(prompt Enter branch name: )" %(commit)
bind main    B        ?git checkout -B remote/%(remote)/%(branch) %(commit)
bind refs    B        !git checkout -B remote/%(remote)/%(branch) %(commit)

# Commit
bind generic C        !git commit -v
bind status  C        !git commit -v
bind main    C        !git commit -v
bind generic +        !git commit --amend --allow-empty

# Move
bind generic <Ctrl-f> move-page-down
bind generic <Ctrl-b> move-page-up

bind generic g        move-first-line
bind generic G        move-last-line
bind main    G        move-last-line

# Fetch
bind main    F        ?git fetch %(remote)
bind refs    F        ?git fetch %(remote)
bind main    <Esc>F   !sh -c "git fetch upstream && git fetch -p upstream && git fetch -p origin"
bind refs    <Esc>F   !sh -c "git fetch upstream && git fetch -p upstream && git fetch -p origin"
bind main    <Esc>1   !sh -c "git fetch upstream && git checkout -B master  upstream/master && git push origin master"
bind main    <Esc>2   !sh -c "git fetch upstream && git checkout -B develop upstream/develop && git push origin develop"
bind main    <Esc>3   !sh -c "git fetch origin   && git checkout -B master  origin/master"
bind main    <Esc>4   !sh -c "git fetch origin   && git checkout -B develop origin/develop"

# Push
bind generic P        !git push -u origin %(repo:head)
# bind generic P        !git push -u %(remote) %(repo:head)

# Merge
bind main    M        ?git merge %(commit)
bind diff    M        ?git merge %(commit)
bind refs    M        ?git merge %(commit)

# Delete
bind refs    d        ?@sh -c "git push --delete %(remote) %(branch) &"
bind refs    P        !git remote update --prune
bind refs    D        !@git branch -D %(branch)

## FIXME
bind refs    <Ctrl-d> !git tag -d %(tag)
bind stash   D        !git stash drop %(stash)
bind status  x        ?git clean -d -f
bind status  D        !@rm %(file)

# Checkout
bind refs    =        !@git checkout %(branch)
bind main    =        !@git checkout %(commit)
bind generic -        !@git checkout -

# Stash
# bind generic S        !git stash save "%(prompt Enter stash comment: )"
bind generic S        !git stash save
bind generic <Esc>S   !git stash pop

# Reset
bind status  H        ?git reset --hard HEAD
bind reflog  H        ?git reset %(commit)
bind main    H        ?git reset %(commit)

# Rebase
bind main    I        ?git rebase -i %(commit)
bind diff    I        ?git rebase -i %(commit)
bind refs    I        ?git rebase -i %(branch)

# Cherry Pick
bind main    <Esc>K   !git cherry-pick %(commit)
bind diff    <Esc>K   !git cherry-pick %(commit)

# Others
bind generic E        view-grep
bind generic <Ctrl-g> refresh
