cl (){
    if [ $# -eq 2 ]; then
        lopt=$1; shift;
        local root=~/github/sample/share
        clang -I. -I "$root/include" -L "$root/lib" -l $lopt  $1
        env LD_LIBRARY_PATH="$root/lib:$LD_LIBRARY_PATH" ./a.out
    else
   	    clang -I. $1 && ./a.out
    fi
}

_complie_and_run_in_c(){
    local main source tfile
    main=$1; shift;
    source=$(cat <<EOS
#include "myc.h"
int main(int argc, char* argv[]){
    $main
    return 0;
}
EOS
)
    tfile=`mktemp`
    echo "$source" | clang -I $C_HEADER_STRUCT -I ~/lib/ -x c - -o $tfile && $tfile "$@"
    [ -f $tfile ] && \rm $tfile
}

# run_c_from_string '#include <stdio.h> ^M int main(){printf("hoge");}'
run_c_from_string() {
    local source=$1; shift;
    tfile=`mktemp`
    echo "$source" | clang -I $C_HEADER_STRUCT -I ~/lib -x c - -o $tfile && $tfile "$@"
    [ -f $tfile ] && \rm $tfile
}
