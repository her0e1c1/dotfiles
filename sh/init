HERE=$(dirname "$(readlink -f $0)")

set -o emacs

# First of all, initialize
. ~/sh/common/valiables
. ~/sh/common/export
. ~/sh/common/function

for i in ~/sh/languages/*; do . $i; done

# Change loading scripts depending on each environment
if uname -a | grep -q Darwin; then
    . ~/sh/mac/alias
   if [ -n "$ZSH_NAME" ]; then
       . ~/sh/mac/zsh
   fi
elif uname -a | grep -q Ubuntu; then
    . ~/sh/ubuntu/alias
   # if [ -n "$ZSH_NAME" ]; then
   #     . ~/sh/ubuntu/zsh
   # fi
fi   

# Decide which shell is used
if [ -n "$BASH_VERSION" ] && [ "${BASH##*/}" = "bash" ]; then
    for i in ~/sh/bash/*; do . $i; done
elif [ -n "$ZSH_NAME" ]; then
    # should be last
    for i in ~/sh/zsh/*; do . $i; done
fi

# import last
. ~/sh/common/alias

# stty stop undef

# ssh
# you should do "ssh-add -l" to check if the command works
eval `ssh-agent` 2> /dev/null 1> /dev/null
for key in ~/.ssh/*.pem; do
    ssh-add $key 2> /dev/null 1> /dev/null;
done

# WARNING
# you must not eval `ssh-agent` again because it resets the old ssh keys
# eval `ssh-agent` && ssh-add ~/.ssh/*.pem
